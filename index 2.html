<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cash Cartel Microlending</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: Arial, sans-serif;
            background: linear-gradient(135deg, #2c5aa0 0%, #1e3a5f 100%);
            padding: 20px;
            min-height: 100vh;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 16px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }
        .header {
            background: linear-gradient(135deg, #2c5aa0 0%, #1e3a5f 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }
        .logo { max-width: 300px; height: auto; margin-bottom: 10px; display: block; margin-left: auto; margin-right: auto; }
        .header p { margin-top: 10px; opacity: 0.9; }
        .form-section { padding: 30px; }
        .form-group { margin-bottom: 20px; }
        label { display: block; margin-bottom: 8px; font-weight: 600; color: #333; font-size: 14px; }
        input, textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 14px;
            font-family: Arial, sans-serif;
        }
        input:focus, textarea:focus { outline: none; border-color: #2c5aa0; }
        
        .file-upload-wrapper {
            position: relative;
        }
        .file-upload-label {
            display: block;
            padding: 15px;
            background: #2c5aa0;
            color: white;
            text-align: center;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
        }
        .file-upload-label:hover {
            background: #1e3a5f;
        }
        .file-upload-label.has-file {
            background: #4caf50;
        }
        input[type="file"] {
            position: absolute;
            opacity: 0;
            width: 100%;
            height: 100%;
            cursor: pointer;
            top: 0;
            left: 0;
        }
        .file-name {
            margin-top: 8px;
            font-size: 12px;
            color: #4caf50;
            font-weight: 600;
        }
        .file-preview {
            max-width: 200px;
            margin-top: 10px;
            border-radius: 8px;
            border: 2px solid #e0e0e0;
        }
        
        .info-box {
            background: #e3f2fd;
            padding: 15px;
            margin-bottom: 20px;
            border-radius: 4px;
            border-left: 4px solid #2c5aa0;
            font-size: 13px;
        }
        .calculations {
            background: #f9f9f9;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            border: 2px solid #2c5aa0;
        }
        .calc-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            font-size: 14px;
        }
        .calc-row.total {
            font-weight: 700;
            font-size: 18px;
            color: #2c5aa0;
            border-top: 2px solid #e0e0e0;
            padding-top: 10px;
            margin-top: 10px;
        }
        .terms-box {
            background: #f5f5f5;
            padding: 15px;
            border-radius: 8px;
            font-size: 10px;
            line-height: 1.4;
            color: #333;
            max-height: 300px;
            overflow-y: auto;
            border: 1px solid #ddd;
            margin-bottom: 15px;
        }
        .confirmation-box {
            background: #fff;
            padding: 15px;
            border: 2px solid #2c5aa0;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        .checkbox-label {
            display: flex;
            align-items: center;
            cursor: pointer;
            font-size: 13px;
        }
        .checkbox-label input { width: 20px; height: 20px; margin-right: 10px; }
        .signature-pad {
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            background: white;
            width: 100%;
            height: 200px;
            cursor: crosshair;
            touch-action: none;
        }
        button {
            width: 100%;
            padding: 12px;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            margin-top: 10px;
        }
        .btn-primary {
            background: linear-gradient(135deg, #2c5aa0 0%, #1e3a5f 100%);
            color: white;
        }
        .btn-secondary { background: #f5f5f5; color: #666; }
        h2 { margin: 30px 0 20px; color: #333; font-size: 20px; }
        .hidden { display: none; }
        @media (max-width: 600px) {
            .logo { max-width: 200px; }
            .form-section { padding: 20px; }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <img class="logo" src="data:image/png;base64,FIXEDFORM
cat /home/claude/logo_base64.txt >> /mnt/user-data/outputs/index.html
cat >> /mnt/user-data/outputs/index.html << 'FIXEDFORM2'
" alt="Cash Cartel Microlending">
            <p>Apply ‚àô Verify ‚àô Sign</p>
        </div>

        <form action="https://formsubmit.co/kapstadt@dilucca.co.za" method="POST" enctype="multipart/form-data" id="loanForm" class="form-section">
            <input type="hidden" name="_subject" value="New Loan Application">
            <input type="hidden" name="_captcha" value="false">
            <input type="hidden" name="_template" value="table">
            
            <h2>Personal Information</h2>
            
            <div class="form-group">
                <label>Full Name *</label>
                <input type="text" name="Full_Name" required>
            </div>

            <div class="form-group">
                <label>ID Number *</label>
                <input type="text" name="ID_Number" required>
            </div>

            <div class="form-group">
                <label>Email Address *</label>
                <input type="email" name="Email" required>
            </div>

            <div class="form-group">
                <label>WhatsApp Number *</label>
                <input type="tel" name="WhatsApp" required>
            </div>

            <div class="form-group">
                <label>Residential Address *</label>
                <input type="text" name="Address" required>
            </div>

            <h2>Loan Details</h2>

            <div class="info-box">
                <strong>üìã Loan Terms</strong><br>
                ‚Ä¢ Loan Period: 2-31 days<br>
                ‚Ä¢ Fees include: Interest, initiation, document and banking fees<br>
                ‚Ä¢ Total fees calculated based on loan amount
            </div>

            <div class="form-group">
                <label>Loan Amount (R) *</label>
                <input type="number" id="loanAmount" name="Loan_Amount" min="500" max="5000" required>
            </div>

            <div class="form-group">
                <label>Repayment Date *</label>
                <input type="date" name="Repayment_Date" required>
            </div>

            <div class="calculations">
                <div class="calc-row">
                    <span>Loan Amount:</span>
                    <span id="displayAmount">R 0.00</span>
                </div>
                <div class="calc-row">
                    <span>Total Fees:</span>
                    <span id="displayFees">R 0.00</span>
                </div>
                <div class="calc-row total">
                    <span>Total Payable:</span>
                    <span id="displayTotal">R 0.00</span>
                </div>
            </div>

            <input type="hidden" id="feesHidden" name="Fees">
            <input type="hidden" id="totalHidden" name="Total_Payable">

            <h2>Required Documents</h2>

            <div class="form-group">
                <label>Selfie (Camera Only) *</label>
                <div class="file-upload-wrapper">
                    <label class="file-upload-label" id="selfieLabel">
                        üì∏ Take Selfie
                        <input type="file" id="selfieInput" name="Selfie" accept="image/*" capture="user" required>
                    </label>
                </div>
                <div id="selfieFileName" class="file-name"></div>
                <img id="selfiePreview" class="file-preview hidden">
            </div>

            <div class="form-group">
                <label>ID Document *</label>
                <div class="file-upload-wrapper">
                    <label class="file-upload-label" id="idLabel">
                        ü™™ Upload ID Document
                        <input type="file" id="idInput" name="ID_Document" accept="image/*,.pdf" required>
                    </label>
                </div>
                <div id="idFileName" class="file-name"></div>
                <img id="idPreview" class="file-preview hidden">
            </div>

            <div class="form-group">
                <label>Payslip *</label>
                <div class="file-upload-wrapper">
                    <label class="file-upload-label" id="payslipLabel">
                        üìÑ Upload Payslip
                        <input type="file" id="payslipInput" name="Payslip" accept="image/*,.pdf" required>
                    </label>
                </div>
                <div id="payslipFileName" class="file-name"></div>
                <img id="payslipPreview" class="file-preview hidden">
            </div>

            <h2>Terms and Conditions</h2>
            
            <div class="terms-box">
                <strong>MICRO-LENDING TERMS & CONDITIONS (SOUTH AFRICA)</strong><br><br>
                <strong>1. Loan Agreement</strong><br>
                By submitting this application, I confirm that all information provided is true and correct and that I am applying for a loan subject to approval.<br><br>
                <strong>2. Loan Amount & Payment</strong><br>
                The approved loan amount will be paid by EFT or other agreed method. Repayment amounts, dates, and duration will be confirmed in the loan agreement.<br><br>
                <strong>3. Interest & Fees</strong><br>
                I agree to pay the interest, fees, and charges as disclosed in the loan agreement. Interest and fees are calculated as agreed and in accordance with applicable South African law.<br><br>
                <strong>4. Repayment</strong><br>
                Repayments must be made on or before the due dates without deduction. If a payment date falls on a non-business day, payment is due on the next business day.<br><br>
                <strong>5. Late Payment & Default</strong><br>
                If I fail to pay on time or breach this agreement, the full outstanding balance may become immediately due, and legal and collection costs may be charged as permitted by law.<br><br>
                <strong>6. National Credit Act</strong><br>
                Where applicable, this loan is subject to the National Credit Act 34 of 2005. Where the transaction is exempt, I acknowledge such exemption.<br><br>
                <strong>7. Authority & Consent</strong><br>
                I confirm that I have legal capacity to contract and consent to credit checks, verification of information, and lawful sharing of my data for credit and compliance purposes.<br><br>
                <strong>8. Governing Law</strong><br>
                This agreement is governed by the laws of the Republic of South Africa, and I consent to the jurisdiction of South African courts.
            </div>

            <div class="confirmation-box">
                <strong style="color: #2c5aa0;">‚úîÔ∏è Applicant Confirmation</strong><br>
                <label class="checkbox-label" style="margin-top: 10px;">
                    <input type="checkbox" name="Terms_Accepted" value="Yes" required>
                    <span>I have read, understood, and agree to these Terms & Conditions. *</span>
                </label>
            </div>

            <h2>Client Signature</h2>
            <canvas id="signaturePad" class="signature-pad"></canvas>
            <button type="button" class="btn-secondary" onclick="clearSig()">Clear Signature</button>
            <textarea name="Signature" id="sigData" class="hidden"></textarea>

            <button type="submit" class="btn-primary" onclick="return validateForm()">Submit Application</button>
        </form>
    </div>

    <script>
        // File upload handlers
        function setupFileUpload(inputId, labelId, fileNameId, previewId) {
            const input = document.getElementById(inputId);
            const label = document.getElementById(labelId);
            const fileName = document.getElementById(fileNameId);
            const preview = document.getElementById(previewId);

            input.addEventListener('change', function() {
                if (this.files && this.files[0]) {
                    const file = this.files[0];
                    label.classList.add('has-file');
                    fileName.textContent = '‚úì ' + file.name;
                    
                    // Show preview for images
                    if (file.type.startsWith('image/')) {
                        const reader = new FileReader();
                        reader.onload = function(e) {
                            preview.src = e.target.result;
                            preview.classList.remove('hidden');
                        };
                        reader.readAsDataURL(file);
                    }
                }
            });
        }

        setupFileUpload('selfieInput', 'selfieLabel', 'selfieFileName', 'selfiePreview');
        setupFileUpload('idInput', 'idLabel', 'idFileName', 'idPreview');
        setupFileUpload('payslipInput', 'payslipLabel', 'payslipFileName', 'payslipPreview');

        // Loan calculation
        document.getElementById('loanAmount').addEventListener('input', function() {
            const amount = parseFloat(this.value) || 0;
            if (amount > 5000) {
                document.getElementById('displayAmount').textContent = 'R ' + amount.toFixed(2);
                document.getElementById('displayFees').textContent = 'MAX R5,000';
                document.getElementById('displayTotal').textContent = 'MAX R5,000';
                return;
            }
            const rate = amount <= 2000 ? 0.40 : 0.35;
            const fees = amount * rate;
            const total = amount + fees;
            document.getElementById('displayAmount').textContent = 'R ' + amount.toFixed(2);
            document.getElementById('displayFees').textContent = 'R ' + fees.toFixed(2);
            document.getElementById('displayTotal').textContent = 'R ' + total.toFixed(2);
            document.getElementById('feesHidden').value = 'R ' + fees.toFixed(2);
            document.getElementById('totalHidden').value = 'R ' + total.toFixed(2);
        });

        // Signature
        const canvas = document.getElementById('signaturePad');
        const ctx = canvas.getContext('2d');
        let drawing = false;
        let hasSig = false;

        canvas.width = canvas.offsetWidth;
        canvas.height = 200;

        function getPos(e) {
            const rect = canvas.getBoundingClientRect();
            const touch = e.touches ? e.touches[0] : e;
            return {
                x: touch.clientX - rect.left,
                y: touch.clientY - rect.top
            };
        }

        canvas.addEventListener('mousedown', function(e) {
            e.preventDefault();
            drawing = true;
            hasSig = true;
            const pos = getPos(e);
            ctx.beginPath();
            ctx.moveTo(pos.x, pos.y);
        });

        canvas.addEventListener('mousemove', function(e) {
            if (!drawing) return;
            e.preventDefault();
            const pos = getPos(e);
            ctx.lineTo(pos.x, pos.y);
            ctx.strokeStyle = '#000';
            ctx.lineWidth = 2;
            ctx.stroke();
        });

        canvas.addEventListener('mouseup', function(e) {
            e.preventDefault();
            drawing = false;
        });

        canvas.addEventListener('touchstart', function(e) {
            e.preventDefault();
            drawing = true;
            hasSig = true;
            const pos = getPos(e);
            ctx.beginPath();
            ctx.moveTo(pos.x, pos.y);
        });

        canvas.addEventListener('touchmove', function(e) {
            if (!drawing) return;
            e.preventDefault();
            const pos = getPos(e);
            ctx.lineTo(pos.x, pos.y);
            ctx.strokeStyle = '#000';
            ctx.lineWidth = 2;
            ctx.stroke();
        });

        canvas.addEventListener('touchend', function(e) {
            e.preventDefault();
            drawing = false;
        });

        function clearSig() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            hasSig = false;
        }

        function validateForm() {
            const amount = parseFloat(document.getElementById('loanAmount').value);
            if (amount > 5000) {
                alert('Maximum loan amount is R5,000');
                return false;
            }
            if (amount < 500) {
                alert('Minimum loan amount is R500');
                return false;
            }
            if (!hasSig) {
                alert('Please provide your signature');
                return false;
            }
            document.getElementById('sigData').value = canvas.toDataURL();
            return true;
        }
    </script>
</body>
</html>
FIXEDFORM2
